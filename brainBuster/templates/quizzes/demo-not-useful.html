i am building a quizz webapp in django called brainbuster ..  i have two apps in it called accounts and quizzes, accounts handle user verification etc by inbuild authentication ..   

following is the quizzes/views.py ... 
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib.auth.decorators import login_required
from django.contrib import messages
from django.http import JsonResponse
import json
from .models import Quiz, Question, Option

@login_required
def dashboard(request):
    # Fetch quizzes created by and participated in by the user.
    created_quizzes = Quiz.objects.filter(created_by=request.user)
    participated_quizzes = request.user.participations.all().select_related('quiz')
    
    return render(request, 'quizzes/dashboard.html', {
        'created_quizzes': created_quizzes,
        'participated_quizzes': participated_quizzes,
    })

@login_required
def create_quiz(request):
    if request.method == 'POST':
        # Extract form data
        title = request.POST.get('quiz_title')
        description = request.POST.get('quiz_description', '')
        icon = request.POST.get('quiz_icon', 'question-circle')
        time_limit = request.POST.get('time_limit_seconds', 30)
        quiz_data_json = request.POST.get('quiz_data')
        
        if not title:
            messages.error(request, 'Quiz title is required.')
            return render(request, 'quizzes/create_quiz.html')
        
        try:
            quiz_data = json.loads(quiz_data_json)
            
            # Create the quiz
            quiz = Quiz.objects.create(
                title=title,
                description=description,
                icon=icon,
                time_limit_per_question=time_limit,
                created_by=request.user
            )
            
            # Process questions
            for q_data in quiz_data['questions']:
                question = Question.objects.create(
                    quiz=quiz,
                    text=q_data['text']
                )
                
                # Process options
                for i, option_text in enumerate(q_data['options']):
                    Option.objects.create(
                        question=question,
                        text=option_text,
                        is_correct=(i == q_data['correctAnswer'])
                    )
            
            messages.success(request, 'Quiz created successfully!')
            return redirect('dashboard')
        
        except json.JSONDecodeError:
            messages.error(request, 'Invalid quiz data format.')
        except Exception as e:
            messages.error(request, f'Error creating quiz: {str(e)}')
    
    return render(request, 'quizzes/create_quiz.html')

@login_required
def edit_quiz(request, quiz_id):
    quiz = get_object_or_404(Quiz, id=quiz_id, created_by=request.user)
    
    if request.method == 'POST':
        # Extract form data
        title = request.POST.get('quiz_title')
        description = request.POST.get('quiz_description', '')
        icon = request.POST.get('quiz_icon', 'question-circle')
        time_limit = request.POST.get('time_limit_seconds', 30)
        quiz_data_json = request.POST.get('quiz_data')
        
        if not title:
            messages.error(request, 'Quiz title is required.')
            return render(request, 'quizzes/edit_quiz.html', {'quiz': quiz})
        
        try:
            quiz_data = json.loads(quiz_data_json)
            
            # Update the quiz details
            quiz.title = title
            quiz.description = description
            quiz.icon = icon
            quiz.time_limit_per_question = time_limit
            quiz.save()
            
            # Delete existing questions and options
            Question.objects.filter(quiz=quiz).delete()
            
            # Process questions
            for q_data in quiz_data['questions']:
                question = Question.objects.create(
                    quiz=quiz,
                    text=q_data['text']
                )
                
                # Process options
                for i, option_text in enumerate(q_data['options']):
                    Option.objects.create(
                        question=question,
                        text=option_text,
                        is_correct=(i == q_data['correctAnswer'])
                    )
            
            messages.success(request, 'Quiz updated successfully!')
            return redirect('dashboard')
        
        except json.JSONDecodeError:
            messages.error(request, 'Invalid quiz data format.')
        except Exception as e:
            messages.error(request, f'Error updating quiz: {str(e)}')
    
    # Prepare quiz data for the template
    questions_data = []
    for question in quiz.questions.all().prefetch_related('options'):
        options = list(question.options.all())
        correct_index = next((i for i, opt in enumerate(options) if opt.is_correct), 0)
        
        questions_data.append({
            'id': question.id,
            'text': question.text,
            'options': [opt.text for opt in options],
            'correctAnswer': correct_index
        })
    
    context = {
        'quiz': quiz,
        'questions_data': json.dumps(questions_data)
    }
    
    return render(request, 'quizzes/edit_quiz.html', context)

@login_required
def delete_quiz(request, quiz_id):
    quiz = get_object_or_404(Quiz, id=quiz_id, created_by=request.user)
    
    if request.method == 'POST':
        quiz.delete()
        messages.success(request, 'Quiz deleted successfully!')
        return redirect('dashboard')
    
    return render(request, 'quizzes/delete_quiz.html', {'quiz': quiz})

@login_required
def join_quiz(request):
    if request.method == 'POST':
        code = request.POST.get('code', '').strip().upper()
        
        if not code:
            messages.error(request, 'Please enter a quiz code.')
            return render(request, 'quizzes/join_quiz.html')
        
        try:
            quiz = Quiz.objects.get(code=code)
            
            # Check if user already participated
            if quiz.participations.filter(user=request.user).exists():
                messages.info(request, f'You have already joined this quiz: {quiz.title}')
            else:
                # Create participation entry
                quiz.participations.create(user=request.user)
                messages.success(request, f'Joined quiz: {quiz.title}')
            
            return redirect('dashboard')
        
        except Quiz.DoesNotExist:
            messages.error(request, 'Quiz not found with that code.')
    
    return render(request, 'quizzes/join_quiz.html')

@login_required
def view_quiz(request, quiz_id):
    quiz = get_object_or_404(Quiz, id=quiz_id)
    
    # Check if user is the creator or a participant
    is_creator = quiz.created_by == request.user
    is_participant = quiz.participations.filter(user=request.user).exists()
    
    if not (is_creator or is_participant):
        messages.error(request, 'You do not have access to this quiz.')
        return redirect('dashboard')
    
    context = {
        'quiz': quiz,
        'is_creator': is_creator,
        'questions': quiz.questions.all().prefetch_related('options')
    }
    
    return render(request, 'quizzes/view_quiz.html', context)

 
following is the create_quiz.html ... 
<!-- create_quiz.html -->

{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-body p-4">
                    <div class="text-center mb-4">
                        <i class="fas fa-question-circle fa-3x text-primary mb-3"></i>
                        <h2 class="fw-bold">Create New Quiz</h2>
                        <p class="text-muted">Set up your quiz and add questions</p>
                    </div>
                    
                    <!-- SECTION 1: Quiz Details -->
                    <form id="quizForm" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags }}" role="alert">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        {% endif %}
                        
                        <div class="row align-items-end mb-4">
                            <!-- Quiz Title -->
                            <div class="col-md-8">
                                <label for="quizTitle" class="form-label fw-medium">Quiz Title</label>
                                <input type="text" id="quizTitle" name="quiz_title" class="form-control" required>
                            </div>
                            
                            <!-- Quiz Icon Button -->
                            <div class="col-md-4">
                                <label class="form-label fw-medium">Quiz Icon</label>
                                <div class="d-flex">
                                    <button type="button" id="iconSelectButton" class="btn btn-outline-primary w-100" data-bs-toggle="modal" data-bs-target="#iconModal">
                                        <i id="selectedIcon" class="fas fa-question-circle me-2"></i>
                                        <span>Select Icon</span>
                                    </button>
                                    <input type="hidden" id="selectedIconValue" name="quiz_icon" value="question-circle">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quiz Description -->
                        <div class="mb-3">
                            <label for="quizDescription" class="form-label fw-medium">Description (Optional)</label>
                            <textarea id="quizDescription" name="quiz_description" class="form-control" rows="2"></textarea>
                            <div class="form-text">Provide a brief description of what your quiz is about.</div>
                        </div>
                        
                        <!-- Time Limit -->
                        <div class="mb-4">
                            <label for="timeLimit" class="form-label fw-medium">Time Limit Per Question (seconds)</label>
                            <input type="number" id="timeLimit" name="time_limit_seconds" class="form-control" min="5" value="30">
                            <div class="form-text">This time limit will apply to all questions in the quiz.</div>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- SECTION 2: Questions -->
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-header bg-light py-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Quiz Questions</h5>
                        <button type="button" id="addQuestionBtn" class="btn btn-sm btn-primary">
                            <i class="fas fa-plus me-1"></i> Add Question
                        </button>
                    </div>
                </div>
                <div class="card-body p-4">
                    <div id="questionsContainer">
                        <!-- Initial empty state -->
                        <div id="emptyState" class="text-center py-5">
                            <i class="fas fa-lightbulb fa-3x text-muted mb-3"></i>
                            <h5>No Questions Added Yet</h5>
                            <p class="text-muted">Click the "Add Question" button to start creating your quiz.</p>
                        </div>
                        
                        <!-- Questions will be added here dynamically -->
                    </div>
                </div>
            </div>
            
            <!-- Save Quiz Button -->
            <div class="d-grid gap-2">
                <button type="button" id="saveQuizBtn" class="btn btn-success py-2" disabled>
                    <i class="fas fa-save me-2"></i>Save Quiz
                </button>
                <a href="{% url 'quiz_dashboard' %}" class="btn btn-outline-secondary">Cancel</a>
            </div>
        </div>
    </div>
</div>

<!-- Icon Selection Modal -->
<div class="modal fade" id="iconModal" tabindex="-1" aria-labelledby="iconModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="iconModalLabel">Select Quiz Icon</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-wrap gap-3 justify-content-center" id="iconGrid">
                    <div class="icon-item" data-icon="question-circle">
                        <i class="fas fa-question-circle fa-2x"></i>
                        <span>General</span>
                    </div>
                    <div class="icon-item" data-icon="graduation-cap">
                        <i class="fas fa-graduation-cap fa-2x"></i>
                        <span>Academic</span>
                    </div>
                    <div class="icon-item" data-icon="flask">
                        <i class="fas fa-flask fa-2x"></i>
                        <span>Science</span>
                    </div>
                    <div class="icon-item" data-icon="calculator">
                        <i class="fas fa-calculator fa-2x"></i>
                        <span>Math</span>
                    </div>
                    <div class="icon-item" data-icon="book">
                        <i class="fas fa-book fa-2x"></i>
                        <span>Literature</span>
                    </div>
                    <div class="icon-item" data-icon="globe">
                        <i class="fas fa-globe fa-2x"></i>
                        <span>Geography</span>
                    </div>
                    <div class="icon-item" data-icon="music">
                        <i class="fas fa-music fa-2x"></i>
                        <span>Music</span>
                    </div>
                    <div class="icon-item" data-icon="film">
                        <i class="fas fa-film fa-2x"></i>
                        <span>Movies</span>
                    </div>
                    <div class="icon-item" data-icon="futbol">
                        <i class="fas fa-futbol fa-2x"></i>
                        <span>Sports</span>
                    </div>
                    <div class="icon-item" data-icon="history">
                        <i class="fas fa-history fa-2x"></i>
                        <span>History</span>
                    </div>
                    <div class="icon-item" data-icon="code">
                        <i class="fas fa-code fa-2x"></i>
                        <span>Coding</span>
                    </div>
                    <div class="icon-item" data-icon="palette">
                        <i class="fas fa-palette fa-2x"></i>
                        <span>Art</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="selectIconBtn" data-bs-dismiss="modal">Select</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Question Modal -->
<div class="modal fade" id="questionModal" tabindex="-1" aria-labelledby="questionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="questionModalLabel">Add New Question</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="questionForm">
                    <!-- Question Text -->
                    <div class="mb-3">
                        <label for="questionText" class="form-label fw-medium">Question</label>
                        <textarea id="questionText" class="form-control" rows="2" required></textarea>
                    </div>
                    
                    <!-- Options -->
                    <div class="mb-3">
                        <label class="form-label fw-medium">Options</label>
                        <div id="modalOptionsContainer">
                            <div class="option-group mb-2">
                                <div class="input-group">
                                    <div class="input-group-text">
                                        <input type="radio" name="modal_correct_answer" value="0" required checked>
                                    </div>
                                    <input type="text" class="form-control option-text" placeholder="Option 1" required>
                                </div>
                            </div>
                            <div class="option-group mb-2">
                                <div class="input-group">
                                    <div class="input-group-text">
                                        <input type="radio" name="modal_correct_answer" value="1">
                                    </div>
                                    <input type="text" class="form-control option-text" placeholder="Option 2" required>
                                </div>
                            </div>
                        </div>
                        <div class="mt-2">
                            <button type="button" id="modalAddOptionBtn" class="btn btn-sm btn-outline-secondary">
                                <i class="fas fa-plus me-1"></i> Add Another Option
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveQuestionBtn">Add Question</button>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for form interactions -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Global variables
    let questions = [];
    let selectedIcon = 'question-circle';
    let selectedIconItem = null;
    let questionCounter = 0;
    
    // DOM Elements
    const iconItems = document.querySelectorAll('.icon-item');
    const selectIconBtn = document.getElementById('selectIconBtn');
    const selectedIconElem = document.getElementById('selectedIcon');
    const selectedIconValue = document.getElementById('selectedIconValue');
    const addQuestionBtn = document.getElementById('addQuestionBtn');
    const modalAddOptionBtn = document.getElementById('modalAddOptionBtn');
    const saveQuestionBtn = document.getElementById('saveQuestionBtn');
    const saveQuizBtn = document.getElementById('saveQuizBtn');
    const questionsContainer = document.getElementById('questionsContainer');
    const emptyState = document.getElementById('emptyState');
    const modalOptionsContainer = document.getElementById('modalOptionsContainer');
    
    // Icon selection in modal
    iconItems.forEach(item => {
        item.addEventListener('click', function() {
            if (selectedIconItem) {
                selectedIconItem.classList.remove('selected');
            }
            this.classList.add('selected');
            selectedIconItem = this;
            selectedIcon = this.getAttribute('data-icon');
        });
    });
    
    // Handle icon selection
    selectIconBtn.addEventListener('click', function() {
        if (selectedIcon) {
            selectedIconElem.className = 'fas fa-' + selectedIcon + ' me-2';
            selectedIconValue.value = selectedIcon;
        }
    });
    
    // Add question button
    addQuestionBtn.addEventListener('click', function() {
        // Reset modal form
        document.getElementById('questionForm').reset();
        resetModalOptions();
        
        // Show modal
        const questionModal = new bootstrap.Modal(document.getElementById('questionModal'));
        questionModal.show();
    });
    
    // Reset modal options to default two options
    function resetModalOptions() {
        modalOptionsContainer.innerHTML = `
            <div class="option-group mb-2">
                <div class="input-group">
                    <div class="input-group-text">
                        <input type="radio" name="modal_correct_answer" value="0" required checked>
                    </div>
                    <input type="text" class="form-control option-text" placeholder="Option 1" required>
                </div>
            </div>
            <div class="option-group mb-2">
                <div class="input-group">
                    <div class="input-group-text">
                        <input type="radio" name="modal_correct_answer" value="1">
                    </div>
                    <input type="text" class="form-control option-text" placeholder="Option 2" required>
                </div>
            </div>
        `;
    }
    
    // Add option in modal
    modalAddOptionBtn.addEventListener('click', function() {
        const optionGroups = modalOptionsContainer.querySelectorAll('.option-group');
        const lastOption = optionGroups[optionGroups.length - 1].querySelector('.option-text');
        
        if (lastOption.value.trim() === '') {
            lastOption.classList.add('is-invalid');
            return;
        }
        
        const newOptionIndex = optionGroups.length;
        const newOptionGroup = document.createElement('div');
        newOptionGroup.className = 'option-group mb-2';
        newOptionGroup.innerHTML = `
            <div class="input-group">
                <div class="input-group-text">
                    <input type="radio" name="modal_correct_answer" value="${newOptionIndex}">
                </div>
                <input type="text" class="form-control option-text" placeholder="Option ${newOptionIndex + 1}" required>
                <button type="button" class="btn btn-outline-danger remove-option">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
        modalOptionsContainer.appendChild(newOptionGroup);
        
        // Add event listener to remove button
        const removeBtn = newOptionGroup.querySelector('.remove-option');
        removeBtn.addEventListener('click', function() {
            modalOptionsContainer.removeChild(newOptionGroup);
            updateModalRadioValues();
        });
        
        // Focus the new input
        newOptionGroup.querySelector('.option-text').focus();
    });
    
    // Update radio values in modal
    function updateModalRadioValues() {
        const radioButtons = document.querySelectorAll('input[name="modal_correct_answer"]');
        radioButtons.forEach((radio, index) => {
            radio.value = index;
        });
    }
    
    // Save question from modal
    saveQuestionBtn.addEventListener('click', function() {
        const questionText = document.getElementById('questionText').value.trim();
        if (questionText === '') {
            document.getElementById('questionText').classList.add('is-invalid');
            return;
        }
        
        // Collect options
        const optionInputs = modalOptionsContainer.querySelectorAll('.option-text');
        const options = [];
        let allOptionsValid = true;
        
        optionInputs.forEach((input, index) => {
            const value = input.value.trim();
            if (value === '') {
                input.classList.add('is-invalid');
                allOptionsValid = false;
            } else {
                options.push(value);
            }
        });
        
        if (!allOptionsValid) return;
        
        // Get correct answer
        const correctAnswerRadio = document.querySelector('input[name="modal_correct_answer"]:checked');
        const correctAnswer = parseInt(correctAnswerRadio.value);
        
        // Create new question object
        questionCounter++;
        const question = {
            id: questionCounter,
            text: questionText,
            options: options,
            correctAnswer: correctAnswer
        };
        
        // Add to questions array
        questions.push(question);
        
        // Update UI
        renderQuestions();
        
        // Close modal
        const questionModal = bootstrap.Modal.getInstance(document.getElementById('questionModal'));
        questionModal.hide();
        
        // Enable save button if we have at least one question
        saveQuizBtn.disabled = questions.length === 0;
    });
    
    // Render all questions
    function renderQuestions() {
        if (questions.length === 0) {
            emptyState.style.display = 'block';
            return;
        }
        
        emptyState.style.display = 'none';
        questionsContainer.innerHTML = '';
        
        questions.forEach((question, index) => {
            const questionCard = document.createElement('div');
            questionCard.className = 'card mb-3';
            questionCard.innerHTML = `
                <div class="card-header bg-light py-2">
                    <div class="d-flex justify-content-between align-items-center">
                        <h6 class="mb-0">Question ${index + 1}</h6>
                        <div>
                            <button type="button" class="btn btn-sm btn-outline-primary edit-question me-1" data-question-id="${question.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-danger delete-question" data-question-id="${question.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body py-3">
                    <p class="mb-3">${question.text}</p>
                    <div class="options-list">
                        ${question.options.map((option, optIndex) => `
                            <div class="option-item mb-2 ${optIndex === question.correctAnswer ? 'correct-answer' : ''}">
                                <div class="input-group">
                                    <div class="input-group-text">
                                        <i class="fas ${optIndex === question.correctAnswer ? 'fa-check-circle text-success' : 'fa-circle text-muted'}"></i>
                                    </div>
                                    <input type="text" class="form-control" value="${option}" readonly>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            questionsContainer.appendChild(questionCard);
        });
        
        // Add event listeners to edit and delete buttons
        document.querySelectorAll('.edit-question').forEach(btn => {
            btn.addEventListener('click', function() {
                const questionId = parseInt(this.getAttribute('data-question-id'));
                editQuestion(questionId);
            });
        });
        
        document.querySelectorAll('.delete-question').forEach(btn => {
            btn.addEventListener('click', function() {
                const questionId = parseInt(this.getAttribute('data-question-id'));
                deleteQuestion(questionId);
            });
        });
    }
    
    // Edit question
    function editQuestion(questionId) {
        const question = questions.find(q => q.id === questionId);
        if (!question) return;
        
        // Reset modal options
        resetModalOptions();
        
        // Fill in question text
        document.getElementById('questionText').value = question.text;
        
        // Add additional options if needed
        while (modalOptionsContainer.children.length < question.options.length) {
            const newIndex = modalOptionsContainer.children.length;
            const newOptionGroup = document.createElement('div');
            newOptionGroup.className = 'option-group mb-2';
            newOptionGroup.innerHTML = `
                <div class="input-group">
                    <div class="input-group-text">
                        <input type="radio" name="modal_correct_answer" value="${newIndex}">
                    </div>
                    <input type="text" class="form-control option-text" placeholder="Option ${newIndex + 1}" required>
                    <button type="button" class="btn btn-outline-danger remove-option">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            modalOptionsContainer.appendChild(newOptionGroup);
            
            // Add event listener to remove button
            const removeBtn = newOptionGroup.querySelector('.remove-option');
            removeBtn.addEventListener('click', function() {
                modalOptionsContainer.removeChild(newOptionGroup);
                updateModalRadioValues();
            });
        }
        
        // Fill in options and set correct answer
        const optionInputs = modalOptionsContainer.querySelectorAll('.option-text');
        const radioInputs = document.querySelectorAll('input[name="modal_correct_answer"]');
        
        question.options.forEach((option, index) => {
            optionInputs[index].value = option;
        });
        
        radioInputs[question.correctAnswer].checked = true;
        
        // Change save button text and action
        const saveQuestionBtn = document.getElementById('saveQuestionBtn');
        saveQuestionBtn.textContent = 'Update Question';
        saveQuestionBtn.onclick = function() {
            // Validate form
            const questionText = document.getElementById('questionText').value.trim();
            if (questionText === '') {
                document.getElementById('questionText').classList.add('is-invalid');
                return;
            }
            
            // Collect options
            const optionInputs = modalOptionsContainer.querySelectorAll('.option-text');
            const options = [];
            let allOptionsValid = true;
            
            optionInputs.forEach((input) => {
                const value = input.value.trim();
                if (value === '') {
                    input.classList.add('is-invalid');
                    allOptionsValid = false;
                } else {
                    options.push(value);
                }
            });
            
            if (!allOptionsValid) return;
            
            // Get correct answer
            const correctAnswerRadio = document.querySelector('input[name="modal_correct_answer"]:checked');
            const correctAnswer = parseInt(correctAnswerRadio.value);
            
            // Update question object
            question.text = questionText;
            question.options = options;
            question.correctAnswer = correctAnswer;
            
            // Update UI
            renderQuestions();
            
            // Close modal
            const questionModal = bootstrap.Modal.getInstance(document.getElementById('questionModal'));
            questionModal.hide();
            
            // Reset save button
            saveQuestionBtn.textContent = 'Add Question';
            saveQuestionBtn.onclick = saveQuestion;
        };
        
        // Show modal
        const questionModal = new bootstrap.Modal(document.getElementById('questionModal'));
        questionModal.show();
    }
    
    // Delete question
    function deleteQuestion(questionId) {
        questions = questions.filter(q => q.id !== questionId);
        renderQuestions();
        
        // Disable save button if no questions
        saveQuizBtn.disabled = questions.length === 0;
    }
    
    // Save question function reference
    function saveQuestion() {
        // This is just a reference to the original click handler
        saveQuestionBtn.click();
    }
    
    // Save quiz
    saveQuizBtn.addEventListener('click', function() {
        const quizTitle = document.getElementById('quizTitle').value.trim();
        const quizDescription = document.getElementById('quizDescription').value.trim();
        const quizIcon = document.getElementById('selectedIconValue').value;
        const timeLimit = document.getElementById('timeLimit').value;
        
        if (quizTitle === '') {
            document.getElementById('quizTitle').classList.add('is-invalid');
            return;
        }
        
        if (questions.length === 0) {
            alert('Please add at least one question to your quiz');
            return;
        }
        
        // Create quiz data object
        const quizData = {
            title: quizTitle,
            description: quizDescription,
            icon: quizIcon,
            timeLimit: timeLimit,
            questions: questions
        };
        
        // Convert to JSON string to be sent to server
        const quizJSON = JSON.stringify(quizData);
        
        // Create a hidden input to carry all the quiz data
        const quizDataInput = document.createElement('input');
        quizDataInput.type = 'hidden';
        quizDataInput.name = 'quiz_data';
        quizDataInput.value = quizJSON;
        
        // Append to form and submit
        const quizForm = document.getElementById('quizForm');
        quizForm.appendChild(quizDataInput);
        quizForm.method = 'post';
        quizForm.action = "{% url 'create_quiz' %}";  // Update with your actual URL
        quizForm.submit();
    });
    
    // Form validation helpers
    document.querySelectorAll('.form-control').forEach(input => {
        input.addEventListener('input', function() {
            if (this.classList.contains('is-invalid')) {
                this.classList.remove('is-invalid');
            }
        });
    });
});
</script>

<style>
/* Icon selection styling */
.icon-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 80px;
    height: 80px;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.icon-item:hover {
    background-color: rgba(0, 123, 255, 0.1);
}

.icon-item.selected {
    background-color: rgba(0, 123, 255, 0.2);
    border: 1px solid #0d6efd;
}

.icon-item i {
    margin-bottom: 5px;
    color: #495057;
}

.icon-item.selected i {
    color: #0d6efd;
}

.icon-item span {
    font-size: 0.75rem;
    text-align: center;
}

/* Correct answer styling */
.correct-answer .input-group-text {
    background-color: rgba(25, 135, 84, 0.1);
    border-color: rgba(25, 135, 84, 0.5);
}

.correct-answer .form-control {
    border-color: rgba(25, 135, 84, 0.5);
    background-color: rgba(25, 135, 84, 0.05);
}
</style>
{% endblock %}

 
following is the edit_quiz.html... 
<!-- edit_quiz.html -->

{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="fw-bold mb-3">Edit Quiz</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Edit Quiz</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm border-0">
                <div class="card-body p-4">
                    <form id="quiz-form" method="post">
                        {% csrf_token %}
                        
                        <div class="mb-4">
                            <label for="quiz_title" class="form-label fw-medium">Quiz Title</label>
                            <input type="text" class="form-control" id="quiz_title" name="quiz_title" required value="{{ quiz.title }}">
                        </div>
                        
                        <div class="mb-4">
                            <label for="quiz_description" class="form-label fw-medium">Description (Optional)</label>
                            <textarea class="form-control" id="quiz_description" name="quiz_description" rows="3">{{ quiz.description }}</textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label for="quiz_icon" class="form-label fw-medium">Icon</label>
                            <select class="form-select" id="quiz_icon" name="quiz_icon">
                                <option value="question-circle" {% if quiz.icon == 'question-circle' %}selected{% endif %}>Question Circle</option>
                                <option value="book" {% if quiz.icon == 'book' %}selected{% endif %}>Book</option>
                                <option value="code" {% if quiz.icon == 'code' %}selected{% endif %}>Code</option>
                                <option value="flask" {% if quiz.icon == 'flask' %}selected{% endif %}>Science Flask</option>
                                <option value="calculator" {% if quiz.icon == 'calculator' %}selected{% endif %}>Calculator</option>
                                <option value="palette" {% if quiz.icon == 'palette' %}selected{% endif %}>Art Palette</option>
                                <option value="music" {% if quiz.icon == 'music' %}selected{% endif %}>Music</option>
                                <option value="globe" {% if quiz.icon == 'globe' %}selected{% endif %}>Globe</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label for="time_limit_seconds" class="form-label fw-medium">Time Limit Per Question (seconds)</label>
                            <input type="number" class="form-control" id="time_limit_seconds" name="time_limit_seconds" min="5" max="300" value="{{ quiz.time_limit_per_question }}">
                        </div>
                        
                        <div class="mb-4">
                            <label class="form-label fw-medium">Questions</label>
                            <div id="questions-container">
                                <!-- Questions will be added dynamically here -->
                            </div>
                            
                            <button type="button" id="add-question" class="btn btn-outline-primary mt-3">
                                <i class="fas fa-plus me-2"></i> Add Question
                            </button>
                        </div>
                        
                        <input type="hidden" id="quiz_data" name="quiz_data" value="">
                        
                        <div class="d-flex justify-content-between mt-5">
                            <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">Cancel</a>
                            <button type="submit" id="save-quiz" class="btn btn-primary">Save Quiz</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        let questionTemplate = `
            <div class="question-card card mb-3">
                <div class="card-header bg-light d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Question <span class="question-number"></span></h5>
                    <button type="button" class="btn btn-sm btn-outline-danger remove-question">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">Question Text</label>
                        <textarea class="form-control question-text" rows="2" required></textarea>
                    </div>
                    <div class="options-container">
                        <div class="option-row mb-2 d-flex align-items-center">
                            <div class="form-check me-2">
                                <input class="form-check-input option-correct" type="radio" name="correct-0">
                            </div>
                            <input type="text" class="form-control option-text" placeholder="Option text" required>
                            <button type="button" class="btn btn-sm btn-outline-danger ms-2 remove-option">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-secondary mt-2 add-option">
                        <i class="fas fa-plus me-1"></i> Add Option
                    </button>
                </div>
            </div>
        `;

        const questionsContainer = document.getElementById('questions-container');
        const addQuestionBtn = document.getElementById('add-question');
        const saveQuizBtn = document.getElementById('save-quiz');
        const quizForm = document.getElementById('quiz-form');
        
        // Load existing quiz data
        const questionsData = {{ questions_data|safe }};
        
        // Function to add a new question
        function addQuestion(questionData = null) {
            const questionDiv = document.createElement('div');
            questionDiv.innerHTML = questionTemplate;
            questionsContainer.appendChild(questionDiv);
            
            const questionCard = questionDiv.querySelector('.question-card');
            const optionsContainer = questionCard.querySelector('.options-container');
            const addOptionBtn = questionCard.querySelector('.add-option');
            const removeQuestionBtn = questionCard.querySelector('.remove-question');
            
            // Update question numbers
            updateQuestionNumbers();
            
            // Add option button
            addOptionBtn.addEventListener('click', function() {
                addOption(optionsContainer, questionCard);
            });
            
            // Remove question button
            removeQuestionBtn.addEventListener('click', function() {
                questionCard.remove();
                updateQuestionNumbers();
            });
            
            // Set up the first option's radio button
            const firstOptionRadio = questionCard.querySelector('.option-correct');
            const questionIndex = document.querySelectorAll('.question-card').length - 1;
            firstOptionRadio.name = `correct-${questionIndex}`;
            
            // If we have data, fill in the question
            if (questionData) {
                questionCard.querySelector('.question-text').value = questionData.text;
                
                // Remove the default option row
                optionsContainer.innerHTML = '';
                
                // Add options with data
                questionData.options.forEach((optionText, index) => {
                    const optionRow = addOption(optionsContainer, questionCard);
                    optionRow.querySelector('.option-text').value = optionText;
                    
                    // Check if this is the correct answer
                    if (index === questionData.correctAnswer) {
                        optionRow.querySelector('.option-correct').checked = true;
                    }
                });
            }
            
            return questionCard;
        }
        
        // Function to add a new option
        function addOption(container, questionCard) {
            const questionIndex = Array.from(document.querySelectorAll('.question-card')).indexOf(questionCard);
            
            const optionRow = document.createElement('div');
            optionRow.className = 'option-row mb-2 d-flex align-items-center';
            optionRow.innerHTML = `
                <div class="form-check me-2">
                    <input class="form-check-input option-correct" type="radio" name="correct-${questionIndex}">
                </div>
                <input type="text" class="form-control option-text" placeholder="Option text" required>
                <button type="button" class="btn btn-sm btn-outline-danger ms-2 remove-option">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            container.appendChild(optionRow);
            
            // Remove option button
            optionRow.querySelector('.remove-option').addEventListener('click', function() {
                optionRow.remove();
            });
            
            return optionRow;
        }
        
        // Function to update question numbers
        function updateQuestionNumbers() {
            document.querySelectorAll('.question-number').forEach((span, index) => {
                span.textContent = index + 1;
            });
            
            // Update radio button names
            document.querySelectorAll('.question-card').forEach((card, cardIndex) => {
                card.querySelectorAll('.option-correct').forEach(radio => {
                    radio.name = `correct-${cardIndex}`;
                });
            });
        }
        
        // Add question button
        addQuestionBtn.addEventListener('click', function() {
            addQuestion();
        });
        
        // Form submission
        quizForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const quizData = {
                questions: []
            };
            
            // Validate and collect data
            const questionCards = document.querySelectorAll('.question-card');
            
            if (questionCards.length === 0) {
                alert('Please add at least one question to your quiz.');
                return;
            }
            
            let isValid = true;
            
            questionCards.forEach((card, index) => {
                const questionText = card.querySelector('.question-text').value.trim();
                const optionRows = card.querySelectorAll('.option-row');
                const options = [];
                let correctAnswerIndex = -1;
                
                optionRows.forEach((row, optIndex) => {
                    const optionText = row.querySelector('.option-text').value.trim();
                    if (optionText === '') {
                        isValid = false;
                        alert(`Please fill in all option texts for question ${index + 1}.`);
                        return;
                    }
                    
                    options.push(optionText);
                    
                    if (row.querySelector('.option-correct').checked) {
                        correctAnswerIndex = optIndex;
                    }
                });
                
                if (questionText === '') {
                    isValid = false;
                    alert(`Please fill in the question text for question ${index + 1}.`);
                    return;
                }
                
                if (options.length < 2) {
                    isValid = false;
                    alert(`Please add at least two options for question ${index + 1}.`);
                    return;
                }
                
                if (correctAnswerIndex === -1) {
                    isValid = false;
                    alert(`Please select a correct answer for question ${index + 1}.`);
                    return;
                }
                
                quizData.questions.push({
                    text: questionText,
                    options: options,
                    correctAnswer: correctAnswerIndex
                });
            });
            
            if (!isValid) {
                return;
            }
            
            // Set quiz data to hidden field
            document.getElementById('quiz_data').value = JSON.stringify(quizData);
            
            // Submit form
            quizForm.submit();
        });
        
        // Load existing questions if available
        if (questionsData && questionsData.length > 0) {
            questionsData.forEach(question => {
                addQuestion(question);
            });
        } else {
            // Add one empty question to start
            addQuestion();
        }
    });
</script>
{% endblock %}


following is the dashboard.html..
<!-- dashboard.html  -->

{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="fw-bold mb-3">Your Dashboard</h1>
            <p class="text-muted">Welcome back, {{ user.username }}! Here you can manage your quizzes and view your progress.</p>
        </div>
    </div>

    <div class="row g-4">
        <!-- Quick Actions Card -->
        <div class="col-md-4">
            <div class="card h-100 shadow-sm border-0">
                <div class="card-body p-4">
                    <h5 class="card-title fw-bold mb-3">Quick Actions</h5>
                    <div class="d-grid gap-2">
                        <a href="{% url 'create_quiz' %}" class="btn btn-primary">
                            <i class="fas fa-plus-circle me-2"></i> Create New Quiz
                        </a>
                        <a href="{% url 'join_quiz' %}" class="btn btn-outline-primary">
                            <i class="fas fa-sign-in-alt me-2"></i> Join a Quiz
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Card -->
        <div class="col-md-8">
            <div class="card h-100 shadow-sm border-0">
                <div class="card-body p-4">
                    <h5 class="card-title fw-bold mb-3">Your Stats</h5>
                    <div class="row g-3 text-center">
                        <div class="col-4">
                            <div class="p-3 bg-light rounded-3">
                                <h2 class="text-primary fw-bold mb-0">{{ created_quizzes.count }}</h2>
                                <p class="text-muted mb-0">Quizzes Created</p>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="p-3 bg-light rounded-3">
                                <h2 class="text-primary fw-bold mb-0">{{ user.participations.count }}</h2>
                                <p class="text-muted mb-0">Quizzes Taken</p>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="p-3 bg-light rounded-3">
                                <h2 class="text-primary fw-bold mb-0">0</h2>
                                <p class="text-muted mb-0">Average Score</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Your Quizzes Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h2 class="fw-bold mb-4">Your Quizzes</h2>
            
            {% if created_quizzes %}
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Title</th>
                                <th>Code</th>
                                <th>Created</th>
                                <th>Time Limit (per question)</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for quiz in created_quizzes %}
                            <tr>
                                <td class="fw-medium">{{ quiz.title }}</td>
                                <td><span class="badge bg-primary">{{ quiz.code }}</span></td>
                                <td>{{ quiz.created_at|date:"M d, Y" }}</td>
                                <td>{{ quiz.time_limit_per_question }} sec</td>
                                <td>
                                    <div class="btn-group">
                                        <a href="{% url 'edit_quiz' quiz.id %}" class="btn btn-sm btn-outline-primary">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <a href="{% url 'delete_quiz' quiz.id %}" class="btn btn-sm btn-outline-danger">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="text-center py-5">
                    <i class="fas fa-puzzle-piece fa-3x text-muted mb-3"></i>
                    <h4>You haven't created any quizzes yet</h4>
                    <p class="text-muted">Create your first quiz to get started!</p>
                    <a href="{% url 'create_quiz' %}" class="btn btn-primary mt-3">
                        <i class="fas fa-plus-circle me-2"></i> Create Quiz
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Recent Activity Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h2 class="fw-bold mb-4">Recent Activity</h2>
            
            {% if user.participations.all %}
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Quiz</th>
                                <th>Date</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for participation in user.participations.all|slice:":5" %}
                            <tr>
                                <td class="fw-medium">{{ participation.quiz.title }}</td>
                                <td>{{ participation.submitted_at|date:"M d, Y" }}</td>
                                <td>
                                    <div class="progress" style="height: 10px;">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: {{ participation.score }}%;" 
                                            aria-valuenow="{{ participation.score }}" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <small class="text-muted">{{ participation.score }}%</small>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="text-center py-5">
                    <i class="fas fa-chart-line fa-3x text-muted mb-3"></i>
                    <h4>No quiz activity yet</h4>
                    <p class="text-muted">Join a quiz to see your recent activity here.</p>
                    <a href="{% url 'join_quiz' %}" class="btn btn-primary mt-3">
                        <i class="fas fa-sign-in-alt me-2"></i> Join Quiz
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}


following is the delete_quizz.html ...
<!-- delete_quiz.html -->

{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="fw-bold mb-3">Delete Quiz</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Delete Quiz</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card shadow-sm border-0">
                <div class="card-body p-4 text-center">
                    <div class="mb-4">
                        <i class="fas fa-exclamation-triangle text-danger fa-4x"></i>
                    </div>
                    
                    <h3 class="fw-bold mb-3">Are you sure you want to delete this quiz?</h3>
                    <p class="text-muted mb-4">
                        You are about to delete "<strong>{{ quiz.title }}</strong>". This action cannot be undone and all related data will be permanently removed. 
                    </p>
                    
                    <form method="post">
                        {% csrf_token %}
                        <div class="d-flex justify-content-center gap-3">
                            <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary px-4">Cancel</a>
                            <button type="submit" class="btn btn-danger px-4">Delete Quiz</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
   
- insted of delete_quiz.html and edit_quiz.html .. i want the create_quiz.html to handle the editing quiz logic insted of edit_quiz.html ... and a small popup to ask for deletiation confirmation insted of a seperate delete_quiz.html
